{% extends 'hod_template/base_template.html' %}
{% block page_title %}
Home
{% endblock page_title %}

{% block main_content %}
<!-- Main content -->
<section class="content" style="background-color:lightgrey;">
   <div class="container-fluid">
      <div class="row">
         <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-info">
               <div class="inner">
                  <h3>{{ student_count }}</h3>
                  <p>Total Students</p>
               </div>
               <div class="icon">
                  <i class="ion ion-pie-graph"></i>
               </div>
               <a href="{% url 'branch_list' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
            </div>
         </div>
         <!-- ./col -->
         <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-success">
               <div class="inner">
                  <h3>{{ staff_count }}</h3>
                  <p>Total Staffs</p>
               </div>
               <div class="icon">
                  <i class="ion ion-pie-graph"></i>
               </div>
               <a href="{% url 'manage_staff' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
            </div>
         </div>
         <!-- ./col -->
         <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-warning">
               <div class="inner">
                  <h3>{{ branch_count }}</h3>
                  <p>Total Branches</p>
               </div>
               <div class="icon">
                  <i class="ion ion-pie-graph"></i>
               </div>
               <a href="{% url 'manage_branch' %}" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
            </div>
         </div>
         <!-- ./col -->
         <div class="col-lg-3 col-6">
            <!-- small box -->
            <div class="small-box bg-danger">
               <div class="inner">
                  <h3>{{ batch_count }}</h3>
                  <p>Total Batches</p>
               </div>
               <div class="icon">
                  <i class="ion ion-pie-graph"></i>
               </div>
               <a class="small-box-footer"><i class="fas fa-arrow-circle-right"></i></a>
            </div>
         </div>
         <!-- ./col -->
      </div>
      <div class="row">
         <div class="col-lg-6">
            <div class="card card-danger">
               <div class="card-header">
                  <h3 class="card-title">Student and Staff Chart</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <canvas id="pieChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
         <div class="col-lg-6">
            <div class="card card-success">
               <div class="card-header">
                  <h3 class="card-title">Total Batches in Each Branch</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <canvas id="donutChart" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-lg-6">
            <div class="card card-info">
               <div class="card-header">
                  <h3 class="card-title">Total Students in Each Branch</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <canvas id="pieChart3" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
         <div class="col-lg-6">
            <div class="card card-warning">
               <div class="card-header">
                  <h3 class="card-title">Total Students in Each Batch</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <canvas id="pieChart4" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-lg-12">
            <div class="card card-success">
               <div class="card-header">
                  <h3 class="card-title">Staff Leaves vs Attendance</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <div class="chart">
                     <canvas id="barChart1" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                  </div>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
      </div>
      <div class="row">
         <div class="col-lg-12">
            <div class="card card-success">
               <div class="card-header">
                  <h3 class="card-title">Student Leaves vs Attendance</h3>
                  <div class="card-tools">
                     <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                     </button>
                     <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-times"></i></button>
                  </div>
               </div>
               <div class="card-body">
                  <div class="chart">
                     <canvas id="barChart2" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%;"></canvas>
                  </div>
               </div>
               <!-- /.card-body -->
            </div>
         </div>
      </div>
   </div>
</section>
<!-- /.content -->
{% endblock main_content %}

{% block custom_js %}
<script>
   $(document).ready(function(){
           var pieData        = {
                 labels: [
                     'Students',
                     'Staffs'
                 ],
                 datasets: [
                   {
                     data: [{{ student_count }},{{ staff_count }}],
                     backgroundColor : ['#f56954', '#00a65a'],
                   }
                 ]
            };

           var pieChartCanvas = $('#pieChart').get(0).getContext('2d')
           var pieOptions     = {
             maintainAspectRatio : false,
             responsive : true,
           }
           var pieChart = new Chart(pieChartCanvas, {
             type: 'pie',
             data: pieData,
             options: pieOptions
           });

           //Second Chart for Total Batches in Each Branch
           var batch_count_list={{ batch_count_list }};
           var branch_name_list={{ branch_name_list|safe }};
           var donutChartCanvas = $('#donutChart').get(0).getContext('2d')
           var donutData        = {
                 labels: branch_name_list,
                 datasets: [
                   {
                     data: batch_count_list,
                     backgroundColor : ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc', '#d2d6de'],
                   }
                 ]
               }
           var donutOptions     = {
             maintainAspectRatio : false,
             responsive : true,
           }
           var donutChart = new Chart(donutChartCanvas, {
             type: 'doughnut',
             data: donutData,
             options: donutOptions
           });

           //Third Chart for Total Students in Each Branch
           var student_branch_count_list={{ student_branch_count_list }};
           var student_branch_name_list={{ student_branch_name_list|safe }};
           var pieChart3Canvas = $('#pieChart3').get(0).getContext('2d')
           var pieData3        = {
                 labels: student_branch_name_list,
                 datasets: [
                   {
                     data: student_branch_count_list,
                     backgroundColor : ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc', '#d2d6de'],
                   }
                 ]
               }
           var pieOptions3     = {
             maintainAspectRatio : false,
             responsive : true,
           }
           var pieChart3 = new Chart(pieChart3Canvas, {
             type: 'pie',
             data: pieData3,
             options: pieOptions3
           });

           //Fourth Chart for Total Students in Each Batch
           var student_batch_count_list={{ student_batch_count_list }};
           var student_batch_name_list={{ student_batch_name_list|safe }};
           var pieChart4Canvas = $('#pieChart4').get(0).getContext('2d')
           var pieData4        = {
                 labels: student_batch_name_list,
                 datasets: [
                   {
                     data: student_batch_count_list,
                     backgroundColor : ['#f56954', '#00a65a', '#f39c12', '#00c0ef', '#3c8dbc', '#d2d6de'],
                   }
                 ]
               }
           var pieOptions4     = {
             maintainAspectRatio : false,
             responsive : true,
           }
           var pieChart4 = new Chart(pieChart4Canvas, {
             type: 'pie',
             data: pieData4,
             options: pieOptions4
           });
   });
</script>
{% endblock custom_js %}
